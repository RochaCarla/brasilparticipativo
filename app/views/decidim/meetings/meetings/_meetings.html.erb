
<% if params.dig("filter", "with_availability").present? && params["filter"]["with_availability"] == "withdrawn" %>
  <div class="callout warning">
    <%= t("decidim.meetings.meetings.index.text_banner",
          go_back_link: link_to(t("decidim.meetings.meetings.index.click_here"), meetings_path("filter[with_availability]" => nil)),
          ).html_safe %>
  </div>
<% end %>

<% if @forced_past_meetings %>
  <div class="callout warning">
    <%= t ".upcoming_meetings_warning" %>
  </div>
<% elsif meetings.length == 0 %>
  <div class="callout warning">
    <%= t ".no_meetings_warning" %>
  </div>
<% end %>

<div class="header-schedule-container">
  <h2>Agenda</h2>
  <div>
    <button class="filter-button">
      <i class="fa-solid fa-share fa-xl" style="color: #1351b4;"></i>
    </button>
    <button class="filter-button">
      <i class="fa-solid fa-sliders fa-xl" style="color: #1351b4;"></i>
    </button>
  </div>
</div>

<div class="br-pagination-meetings" aria-label="PaginaÃ§Ã£o de resultados" data-current="1">
  <%= button_tag(remote: true, class: 'br-button circle meetings-pagination-button', id: "prev-button", type: "button" , :action => "prev_month")do %>
    <i class="fa-solid fa-caret-left fa-xl"></i>
        <%# <%= (@current_month << 1).month %> 
        <%= prev_month %>
  <% end %>
  <p class="meetings-pagination-text">
    <%= @current_month.month %>
  </p>
  <%= button_tag(remote: true, class: 'br-button circle meetings-pagination-button', id: "next-button", type: "button") do %>
    <i class="fa-solid fa-caret-right fa-xl"></i>
    <%= (@current_month >> 1).month %>
  <% end %>
</div>
 

<p id="meetings-count" class="count-schedule-text">
  <%= render partial: "count" %>
</p>

<%# <div class="row medium-up-2">

  <%# <div class="column">
    <%= render partial: "decidim/meetings/calendar_modal", locals: {
      path: short_url(
        route_name: "calendar",
        params: { filter: params.fetch(:filter, {}).try(:to_unsafe_hash) }
      )
    } %>
  <%# </div>  %>
  
<%# </div> %> 

<div class="row small-up-1 medium-up-2 card-grid">
  <% meetings.each do |meeting| %>
  <% if meeting.start_time.month == 10  %>
    <%= card_for meeting %>
  <% end %>
<% end %>
</div>

<%# <%= decidim_paginate meetings, order_start_time: params[:order_start_time], with_any_scope: params[:with_any_scope] %> 

<div class="column">
    <%= render partial: "decidim/shared/results_per_page" %>
</div>

<div class="row">
  <div class="text-right">
    <% if params.dig("filter", "with_availability").present? && params["filter"]["with_availability"] == "withdrawn" %>
      <%= link_to t("decidim.meetings.meetings.index.see_all"), meetings_path("filter[with_availability]" => nil) %>
    <% else %>
      <%= link_to t("decidim.meetings.meetings.index.see_all_withdrawn"), meetings_path("filter[with_availability]" => "withdrawn") %>
    <% end %>
  </div>
</div>

