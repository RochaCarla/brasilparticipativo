<span class="meetings-form-section-title"><%= t('.about_meeting_title') %></span>

<div class="br-input input-highlight bp-input">
  <%= form.text_field :title, {autofocus: true, class: "js-hashtags", hashtaggable: true, label_options: { class: 'bp-form-label' } } %>
</div>

<div class="bp-text-area">
  <%= text_editor_for(form, :description, hashtaggable: true) %>
</div>

<div class="bp-dark-divider my-sm-3x"></div>

<span class="meetings-form-section-title"><%= t('.meeting_format_title') %></span>

<div class="bp-select input-highlight">
  <%= form.select :type_of_meeting,
                  @form.type_of_meeting_select,
                  { include_blank: t(".select_a_meeting_type"), label_options: { class: 'bp-form-label' } },
                  { multiple: false, class: "meeting-form-input" } %>
</div>

<div class="br-input input-highlight bp-input" data-meeting-type="online">
  <%= form.text_field :online_meeting_url %>
  <p class="bp-help-text"><%= t(".online_meeting_url_help") %></p>
</div>

<div class="iframe-fields">
  <div class="field" data-meeting-type="online">
    <%= form.select :iframe_embed_type,
      @form.iframe_embed_type_select,
      { multiple: false } %>
    <p class="bp-help-text"><%= t(".show_embedded_iframe_help", domains: Decidim::Meetings.embeddable_services&.join(" ")) %></p>
  </div>

  <div class="field iframe-fields--access-level" id="meeting_iframe_embed_type" data-meeting-type="online-access-level">
    <%= form.select :iframe_access_level,
      @form.iframe_access_level_select,
      { include_blank: t(".select_an_iframe_access_level") },
      { multiple: false } %>
  </div>
</div>


<div class="bp-dark-divider my-sm-3x"></div>

<span class="meetings-form-section-title"><%= t('.meeting_location_title') %></span>

<div class="form-foreground-section">
  <div class="br-input input-highlight" data-meeting-type="in_person">
    <%= form.geocoding_field :address, { required: true, class: "bp-foreground-field",  label_options: {class: 'bp-form-label'}, placeholder: t(".placeholder.geocoding.address")}%>
    <p class="bp-help-text"><%= t(".address_help") %></p>
  </div>

  <div class="br-input input-highlight" data-meeting-type="in_person">
    <%= form.text_field :location, {placeholder: t(".placeholder.geocoding.location"), required: true, class: "bp-foreground-field", label_options: {class: 'bp-form-label'}} %>
    <p class="bp-help-text"><%= t(".location_help") %></p>
  </div>

  <div class="br-input input-highlight">
    <%= form.text_field :location_hints, {placeholder: t(".placeholder.geocoding.tips"), required: true, class: "bp-foreground-field", label_options: {class: 'bp-form-label'},} %>
    <p class="bp-help-text"><%= t(".location_hints_help") %></p>
  </div>
</div>

<div class="bp-dark-divider my-sm-3x"></div>

<span class="meetings-form-section-title"><%= t('.meeting_duration_title') %></span>

<div class="form-foreground-section two-column-grid ">
  <div class="br-input input-highlight no_help-text">
    <%= form.date_field :start_date, {label: t(".start_date"), label_options: {class: 'bp-form-label'}, class: "bp-foreground-field"} %>

  </div>

  <div class="br-input input-highlight no_help-text">
    <%= form.date_field :end_date, {label: t(".end_date"), label_options: {class: 'bp-form-label'}, class: "bp-foreground-field"} %>

  </div>

  <div  class="br-datetimepicker br-input input-highlight" data-mode="single" data-type="time">
    <%= form.time_field :start_time_only, {label: t(".start_time"), label_options: {class: 'bp-form-label'}, class: "bp-foreground-field"} %>
  </div>

  <div  class="br-datetimepicker br-input input-highlight" data-mode="single" data-type="time">
    <%= form.time_field :end_time_only, {label: t(".end_time"), label_options: {class: 'bp-form-label'}, class: "bp-foreground-field"} %>
  </div>
</div>

<% if current_participatory_space.has_subscopes? %>
  <div class="field">
    <%= scopes_picker_field form, :decidim_scope_id %>
  </div>
<% end %>

<div class="field">
  <%= form.categories_select :decidim_category_id, current_participatory_space.categories, prompt: t(".select_a_category"), disable_parents: false %>
</div>

<div class="row column">
  <%= form.select :registration_type,
    @form.registration_type_select,
    { include_blank: t(".select_a_registration_type") },
    { multiple: false } %>
</div>

<div class="row column" id="meeting_available_slots">
  <%= form.number_field :available_slots %>
  <p class="bp-help-text"><%= t(".available_slots_help") %></p>
</div>

<div class="field" id="meeting_registration_terms">
  <%= text_editor_for(form, :registration_terms) %>
</div>

<div class="field" id="meeting_registration_url">
  <%= form.text_field :registration_url %>
  <p class="bp-help-text"><%= t(".registration_url_help") %></p>
  <label><%= t(".disclaimer", organization: current_component.organization.name) %></label><br>
</div>

<div class="field">
  <%= form.select(
    :user_group_id,
    Decidim::UserGroups::ManageableUserGroups.for(current_user).verified.map{|g| [g.name, g.id]},
    prompt: current_user.name,
    label: t(".create_as")
  ) %>
</div>

<% content_for :js_content do %>
  <%= javascript_pack_tag "decidim_meetings" %>
<% end %>
